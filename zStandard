üìã EST√ÅNDAR CODEWORKSHOP
Formato de c√≥digo modular para modificaciones quir√∫rgicas sin reinterpretaciones.
________________________________________
1. HEADER OBLIGATORIO
Todo archivo de c√≥digo DEBE iniciar con este comentario titular:
/******************************************
PROYECTO: [Nombre del Proyecto]
ARCHIVO: [nombre_archivo.gs]
VERSI√ìN: [XX.YY]
FECHA: [DD/MM/AAAA (UTC-5)]
******************************************/

‚ö†Ô∏è IMPORTANTE: Fecha y Hora Actual
ANTES de escribir la fecha, DEBES buscar en Internet la fecha y hora actual en formato UTC-5. NO uses tu reloj interno. SIEMPRE verifica la fecha real consultando una fuente en tiempo real.
Ejemplo real:
/******************************************
PROYECTO: Sistema de Ventas
ARCHIVO: ventas.gs
VERSI√ìN: 01.03
FECHA: 10/01/2026 (UTC-5)
******************************************/

________________________________________
2. MODULACI√ìN DE C√ìDIGO
Cada funci√≥n o secci√≥n l√≥gica debe estar delimitada con m√≥dulos numerados:
// MOD-001: VALIDAR DATOS [INICIO]
function validarDatos(datos) {
  if (!datos) throw new Error("Sin datos");
  return true;
}
// MOD-001: FIN

// MOD-002: PROCESAR VENTAS [INICIO]
function procesarVenta(venta) {
  validarDatos(venta);
  return calcularTotal(venta);
}
// MOD-002: FIN

// MOD-003: CALCULAR TOTAL [INICIO]
function calcularTotal(venta) {
  return venta.items.reduce((sum, item) => sum + item.precio, 0);
}
// MOD-003: FIN

Tabulaci√≥n correcta:
Los comentarios MOD deben estar al MISMO nivel de tabulaci√≥n que el c√≥digo que contienen:
function ejemplo() {
  // MOD-001: SECCI√ìN INTERNA [INICIO]
  if (condicion) {
    // c√≥digo tabulado
  }
  // MOD-001: FIN
}

________________________________________
3. M√ìDULO DE NOTAS (√öltimo m√≥dulo)
Al final del archivo, incluye un m√≥dulo de NOTAS para comentarios, advertencias y referencias:
// MOD-010: NOTAS [INICIO]
/*
DESCRIPCI√ìN:
Este archivo maneja el sistema de ventas con validaci√≥n de datos.

DEPENDENCIAS:
‚óè MOD-001: Requiere que datos sea un objeto v√°lido
‚óè MOD-002: Llama a MOD-001 y MOD-003

ADVERTENCIAS:
‚óè MOD-003: No maneja valores negativos, validar antes

REFERENCIAS:
‚óè API de pagos: https://ejemplo.com/api
‚óè Documentaci√≥n: https://docs.ejemplo.com
*/
// MOD-010: FIN

________________________________________
4. REGLAS CR√çTICAS
‚úÖ Numeraci√≥n Secuencial
MOD-001, MOD-002, MOD-003  ‚Üê CORRECTO
MOD-001, MOD-005, MOD-003  ‚Üê INCORRECTO (salto de n√∫meros)

‚úÖ Etiquetas Obligatorias
‚óè [INICIO] con corchetes es OBLIGATORIO ‚óè FIN debe tener el MISMO n√∫mero que INICIO
Ejemplo:
// MOD-007: FUNCI√ìN [INICIO]
function test() {}
// MOD-007: FIN

‚ùå NO usar MOD-XXX dentro del c√≥digo
INCORRECTO:
// MOD-001: VALIDAR [INICIO]
function validar() {
  // Este es el MOD-001 que valida... ‚Üê NO HACER
}
// MOD-001: FIN

CORRECTO:
// MOD-001: VALIDAR [INICIO]
function validar() {
  // Valida que los datos existan
}
// MOD-001: FIN

________________________________________
5. CUANDO MODIFICAS C√ìDIGO EXISTENTE
üéØ REGLA DE ORO:
Si el c√≥digo YA tiene m√≥dulos, SOLO entrega el m√≥dulo modificado.
Ejemplo de modificaci√≥n correcta:
Usuario dice: "Mejora la validaci√≥n para que acepte arrays vac√≠os"
‚ùå INCORRECTO - NO hagas esto:
[Entregar todo el archivo de 500 l√≠neas completo]

‚úÖ CORRECTO - Haz esto:
// MOD-001: VALIDAR DATOS [INICIO]
function validarDatos(datos) {
  if (!datos) throw new Error("Sin datos");
  
  // Permitir arrays vac√≠os
  if (Array.isArray(datos)) return true;
  
  if (datos.length === 0) throw new Error("Datos sin elementos");
  return true;
}
// MOD-001: FIN

El usuario usar√° CodeWorkShop para reemplazar SOLO ese m√≥dulo.
________________________________________
6. EJEMPLO COMPLETO
/******************************************
PROYECTO: Control de Inventario
ARCHIVO: inventario.gs
VERSI√ìN: 01.00
FECHA: 10/01/2026 (UTC-5)
******************************************/

// MOD-001: CONFIGURACI√ìN [INICIO]
const CONFIG = {
  hoja: "Inventario",
  colProducto: 0,
  colStock: 1
};
// MOD-001: FIN

// MOD-002: OBTENER HOJA [INICIO]
function obtenerHoja() {
  return SpreadsheetApp.getActiveSpreadsheet()
    .getSheetByName(CONFIG.hoja);
}
// MOD-002: FIN

// MOD-003: BUSCAR PRODUCTO [INICIO]
function buscarProducto(codigo) {
  const hoja = obtenerHoja();
  const datos = hoja.getDataRange().getValues();
  
  for (let i = 1; i < datos.length; i++) {
    if (datos[i][CONFIG.colProducto] === codigo) {
      return {
        fila: i + 1,
        stock: datos[i][CONFIG.colStock]
      };
    }
  }
  
  return null;
}
// MOD-003: FIN

// MOD-004: ACTUALIZAR STOCK [INICIO]
function actualizarStock(codigo, cantidad) {
  const prod = buscarProducto(codigo);
  if (!prod) throw new Error("Producto no encontrado");
  
  const hoja = obtenerHoja();
  const nuevoStock = prod.stock + cantidad;
  hoja.getRange(prod.fila, CONFIG.colStock + 1).setValue(nuevoStock);
  
  return nuevoStock;
}
// MOD-004: FIN

// MOD-005: NOTAS [INICIO]
/*
DESCRIPCI√ìN:
Sistema b√°sico de inventario con b√∫squeda y actualizaci√≥n de stock.

DEPENDENCIAS:
‚óè MOD-002: Requiere hoja "Inventario" en el Spreadsheet
‚óè MOD-003: Usa configuraci√≥n de MOD-001
‚óè MOD-004: Llama a MOD-002 y MOD-003

ADVERTENCIAS:
‚óè MOD-003: Devuelve null si no encuentra el producto
‚óè MOD-004: Lanza error si producto no existe

PR√ìXIMAS MEJORAS:
‚óè Agregar validaci√≥n de cantidad negativa
‚óè Implementar registro de movimientos
*/
// MOD-005: FIN

________________________________________
7. RESUMEN
SIEMPRE:
‚úÖ Header con fecha consultada en Internet (UTC-5) ‚úÖ M√≥dulos numerados secuencialmente (MOD-001, MOD-002...) ‚úÖ [INICIO] y FIN con el mismo n√∫mero ‚úÖ M√≥dulo de NOTAS al final ‚úÖ Solo entregar el m√≥dulo modificado cuando el c√≥digo ya existe
NUNCA:
‚ùå Saltar n√∫meros en m√≥dulos ‚ùå Usar MOD-XXX dentro de comentarios del c√≥digo ‚ùå Olvidar [INICIO] o FIN ‚ùå Entregar todo el archivo si solo cambi√≥ una funci√≥n ‚ùå Usar fecha/hora de tu reloj interno (consultar en Internet)
________________________________________
‚úÖ Listo para CodeWorkShop
________________________________________
INSTRUCCIONES PARA CONFIGURACI√ìN:
1.	Copia todo el texto anterior en un Google Doc nuevo

2.	Aplica NEGRITA a estos t√≠tulos:

‚óã	"1. HEADER OBLIGATORIO"
‚óã	"‚ö†Ô∏è IMPORTANTE: Fecha y Hora Actual"
‚óã	"Ejemplo real:"
‚óã	"2. MODULACI√ìN DE C√ìDIGO"
‚óã	"Tabulaci√≥n correcta:"
‚óã	"3. M√ìDULO DE NOTAS (√öltimo m√≥dulo)"
‚óã	"4. REGLAS CR√çTICAS"
‚óã	"‚úÖ Numeraci√≥n Secuencial"
‚óã	"‚úÖ Etiquetas Obligatorias"
‚óã	"‚ùå NO usar MOD-XXX dentro del c√≥digo"
‚óã	"5. CUANDO MODIFICAS C√ìDIGO EXISTENTE"
‚óã	"üéØ REGLA DE ORO:"
‚óã	"Ejemplo de modificaci√≥n correcta:"
‚óã	"6. EJEMPLO COMPLETO"
‚óã	"7. RESUMEN"
3.	Usa fuente monoespaciada (Courier New o Consolas) para los bloques de c√≥digo

4.	Ve a: Archivo ‚Üí Compartir ‚Üí Publicar en la web ‚Üí Publicar

5.	Configura los permisos: "Cualquiera con el enlace puede ver"

6.	Copia el ID del documento (est√° en la URL entre /d/ y /edit)

‚óã	Ejemplo: docs.google.com/document/d/[ESTE_ES_EL_ID]/edit
7.	Pega ese ID en el archivo code.gs en la funci√≥n obtenerEstandar()

IMPORTANTE:
‚óè Mant√©n el formato simple (texto plano con negritas)
‚óè Los espacios y saltos de l√≠nea se respetan tal cual

